<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consumer Registration</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<div class="container">
    <div class="header">
        <p>Register New User</p>
    </div>
    <form id="registrationForm">
        <div class="register-title">
            <p>Consumer Details</p>
        </div>
        <div class="fields-box">
            <div class="details-box">
                <label for="consumerId">Consumer ID:</label>
                <input type="number" id="consumerId" name="consumerId" value="" placeholder="Consumer Number" disabled>
            </div>
            <div class="details-box">
                <label for="billNumber">Bill Number:</label>
                <input type="number" id="billNumber" name="billNumber" maxlength="5" pattern="[0-9]{5}" placeholder="Last 5 Digits" required>
            </div> 
        </div>
        <div class="register-title">
            <p>User Details</p>
        </div>
        <div class="fields-box">
            <div class="details-box">
                <label for="title">Title:</label>
                <select id="title" name="title" >
                    <option value="Mr.">Mr.</option>
                    <option value="Ms.">Ms.</option>
                    <option value="Mrs.">Mrs.</option>
                    <option value="Dr.">Dr.</option>
                </select>
            </div>
            <div class="details-box">
                <label for="customerName">Name:</label>
                <input type="text" id="customerName" name="customerName" placeholder="Enter your Name" maxlength="50" required>
            </div>    
        </div>
        <div class="fields-box">
            <div class="details-box">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" placeholder="Email Address" required>
            </div>
            <div class="details-box">
            <label for="countryCode">Mobile Number:</label>
                <select id="countryCode" aria-placeholder="91 - India">
                    <option value="+91">+91 (India)</option>
                    <option value="+1">+1 (USA)</option>
                    <option value="+44">+44 (UK)</option>
                </select>
                <input type="number" id="mobileNumber" name="mobileNumber" maxlength="10" placeholder="Mobile Number" pattern="[0-9]{10}" required>
            </div>
        </div>
        <div class="register-title">
            <p>Login Details</p>
        </div>
        <div class="fields-box">
            <div class="details-box">
                <label for="userId">User ID:</label>
                <input type="text" id="userId" name="userId" minlength="5" maxlength="20" required>
            </div>
            <div class="details-box">
                <label for="password">Password:</label>
                <input type="password" id="password" name="password" maxlength="30" required>
            </div>
            <div class="details-box">
                <label for="confirmPassword">Confirm Password:</label>
                <input type="password" id="confirmPassword" name="confirmPassword" maxlength="30" required>
            </div>
        </div>
        <div class="submit-box">
            <button type="reset" class="reset">Reset</button>
            <button type="submit" class="register">Register</button>
        </div>
    </form>
</div>
<script>
    //registration
    document.addEventListener("DOMContentLoaded", function() {
        
        const registrationForm = document.getElementById("registrationForm");

        if (registrationForm) {
            registrationForm.addEventListener("submit", function (event) {
                event.preventDefault();

                let password = document.getElementById("password").value;
                let confirmPassword = document.getElementById("confirmPassword").value;
                if (password !== confirmPassword) {
                    alert("Passwords do not match!");
                    return;
                }

                let consumerId = Math.floor(1000000000000 + Math.random() * 9000000000000);
                document.getElementById("consumerId").value = consumerId;

                let customerData = {
                    consumerId: consumerId,
                    billNumber: document.getElementById("billNumber").value,
                    title: document.getElementById("title").value,
                    customerName: document.getElementById("customerName").value,
                    email: document.getElementById("email").value,
                    countryCode: document.getElementById("countryCode").value,
                    mobileNumber: document.getElementById("mobileNumber").value,
                    userId: document.getElementById("userId").value,
                    password: password
                };

                localStorage.setItem("customerData", JSON.stringify(customerData));
                console.log(localStorage.getItem("formData"));
                window.location.href = "registerAcknowledgement.html";

            });
        }    
    });
</script>
</body>
</html>
